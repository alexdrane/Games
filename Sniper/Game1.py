import pygame, sys
from pygame.locals import *
import random
from random import *

class wall(object):
  pos = (0,0,0,0)
  col = (140,140,140)
  def __init__(self,pos1,pos2):
    self.pos = (pos1,pos2,20,20)
class en(object):
  d = "r"
  px = 0
  py = 0
  ppx = 0
  ppy = 0
  def __init__(self,px,py):
    self.px = px
    self.py = py

enemies = []

walls = []
for i in range(90):
  walls.append(wall(20*i,0))
  walls.append(wall(20*i,580))
for i in range(30):
  walls.append(wall(0,20*i))
  walls.append(wall(880,20*i))
walls.append(wall(60,40))
walls.append(wall(60,60))
walls.append(wall(40,60))
walls.append(wall(40,80))
walls.append(wall(80,40))
walls.append(wall(20,120))
walls.append(wall(40,120))
walls.append(wall(60,120))
walls.append(wall(80,100))
walls.append(wall(80,120))
walls.append(wall(120,20))
walls.append(wall(120,40))
walls.append(wall(120,60))
walls.append(wall(120,80))
walls.append(wall(120,100))
walls.append(wall(120,120))
walls.append(wall(20,200))
walls.append(wall(40,200))
walls.append(wall(60,200))
walls.append(wall(80,200))
walls.append(wall(100,200))
walls.append(wall(120,200))
walls.append(wall(140,200))
walls.append(wall(160,200))
walls.append(wall(180,200))
walls.append(wall(200,200))
walls.append(wall(220,200))
walls.append(wall(240,200))
walls.append(wall(260,200))
walls.append(wall(280,200))
walls.append(wall(300,200))
walls.append(wall(320,200))
walls.append(wall(340,200))
walls.append(wall(360,200))
walls.append(wall(380,200))
walls.append(wall(400,200))
walls.append(wall(400,180))
walls.append(wall(400,160))
walls.append(wall(400,140))
walls.append(wall(400,120))
walls.append(wall(380,120))
walls.append(wall(360,120))
walls.append(wall(320,120))
walls.append(wall(300,120))
walls.append(wall(280,120))
walls.append(wall(260,120))
walls.append(wall(240,120))
walls.append(wall(220,120))
walls.append(wall(200,120))
walls.append(wall(180,120))
walls.append(wall(160,120))
walls.append(wall(140,120))
walls.append(wall(360,100))
walls.append(wall(360,80))
walls.append(wall(340,80))
walls.append(wall(320,80))
walls.append(wall(300,80))
walls.append(wall(280,80))
walls.append(wall(280,60))
walls.append(wall(260,60))
walls.append(wall(240,100))
walls.append(wall(200,100))
walls.append(wall(200,20))
walls.append(wall(240,20))
walls.append(wall(240,60))
walls.append(wall(200,60))
walls.append(wall(180,60))
walls.append(wall(160,80))
walls.append(wall(160,60))
walls.append(wall(260,20))
walls.append(wall(280,20))
walls.append(wall(300,20))
walls.append(wall(320,20))
walls.append(wall(320,40))
walls.append(wall(360,60))
walls.append(wall(360,40))
walls.append(wall(400,20))
walls.append(wall(400,40))
walls.append(wall(400,60))
walls.append(wall(400,80))
walls.append(wall(420,80))
walls.append(wall(440,80))
walls.append(wall(420,120))
walls.append(wall(440,120))
walls.append(wall(480,100))
walls.append(wall(480,80))
walls.append(wall(480,120))
walls.append(wall(480,160))
walls.append(wall(480,140))
walls.append(wall(460,160))
walls.append(wall(440,160))
walls.append(wall(420,200))
walls.append(wall(460,200))
walls.append(wall(480,200))
walls.append(wall(500,200))
walls.append(wall(520,200))
walls.append(wall(520,180))
walls.append(wall(520,160))
walls.append(wall(480,60))
walls.append(wall(500,60))
walls.append(wall(520,60))
walls.append(wall(480,40))
walls.append(wall(460,40))
walls.append(wall(440,40))
walls.append(wall(520,20))
walls.append(wall(540,20))
walls.append(wall(560,20))
walls.append(wall(560,40))
walls.append(wall(560,60))
walls.append(wall(560,80))
walls.append(wall(540,100))
walls.append(wall(560,100))
walls.append(wall(520,100))
walls.append(wall(520,120))
walls.append(wall(540,120))
walls.append(wall(560,120))
walls.append(wall(540,160))
walls.append(wall(560,160))
walls.append(wall(580,60))
walls.append(wall(580,80))
walls.append(wall(600,20))
walls.append(wall(620,20))
walls.append(wall(620,40))
walls.append(wall(620,60))
walls.append(wall(620,80))
walls.append(wall(620,100))
walls.append(wall(620,120))
walls.append(wall(600,120))
walls.append(wall(600,140))
walls.append(wall(600,160))
walls.append(wall(600,180))
walls.append(wall(600,200))
walls.append(wall(580,200))
walls.append(wall(560,200))
walls.append(wall(560,220))
walls.append(wall(560,240))
walls.append(wall(540,240))
walls.append(wall(500,220))
walls.append(wall(500,260))
walls.append(wall(540,260))
walls.append(wall(520,280))
walls.append(wall(500,280))
walls.append(wall(540,280))
walls.append(wall(420,220))
walls.append(wall(420,240))
walls.append(wall(440,240))
walls.append(wall(460,240))
walls.append(wall(460,260))
walls.append(wall(500,300))
walls.append(wall(480,300))
walls.append(wall(460,300))
walls.append(wall(460,320))
walls.append(wall(440,320))
walls.append(wall(420,320))
walls.append(wall(420,340))
walls.append(wall(420,280))
walls.append(wall(400,280))
walls.append(wall(380,280))
walls.append(wall(380,260))
walls.append(wall(380,240))
walls.append(wall(380,300))
walls.append(wall(380,320))
walls.append(wall(380,340))
walls.append(wall(420,360))
walls.append(wall(420,380))
walls.append(wall(400,380))
walls.append(wall(380,380))
walls.append(wall(360,380))
walls.append(wall(340,380))
walls.append(wall(320,380))
walls.append(wall(340,360))
walls.append(wall(340,340))
walls.append(wall(340,320))
walls.append(wall(340,300))
walls.append(wall(340,280))
walls.append(wall(340,260))
walls.append(wall(340,220))
walls.append(wall(320,260))
walls.append(wall(300,260))
walls.append(wall(300,240))
walls.append(wall(240,220))
walls.append(wall(280,240))
walls.append(wall(240,240))
walls.append(wall(300,300))
walls.append(wall(280,300))
walls.append(wall(260,300))
walls.append(wall(260,280))
walls.append(wall(260,340))
walls.append(wall(260,360))
walls.append(wall(280,360))
walls.append(wall(280,340))
walls.append(wall(220,340))
walls.append(wall(220,320))
walls.append(wall(200,320))
walls.append(wall(200,280))
walls.append(wall(200,260))
walls.append(wall(200,240))
walls.append(wall(160,260))
walls.append(wall(140,260))
walls.append(wall(120,260))
walls.append(wall(120,280))
walls.append(wall(120,300))
walls.append(wall(120,320))
walls.append(wall(120,340))
walls.append(wall(140,340))
walls.append(wall(180,420))
walls.append(wall(160,420))
walls.append(wall(160,400))
walls.append(wall(220,400))
walls.append(wall(120,400))
walls.append(wall(140,220))
walls.append(wall(60,220))
walls.append(wall(60,240))
walls.append(wall(60,260))
walls.append(wall(60,280))
walls.append(wall(40,220))
walls.append(wall(20,320))
walls.append(wall(40,320))
walls.append(wall(60,320))
walls.append(wall(60,340))
walls.append(wall(60,360))
walls.append(wall(80,380))
walls.append(wall(80,400))
walls.append(wall(60,380))
walls.append(wall(40,380))
walls.append(wall(40,360))
walls.append(wall(40,340))
walls.append(wall(20,340))
walls.append(wall(0,340))
walls.append(wall(20,360))
walls.append(wall(20,380))
walls.append(wall(20,400))
walls.append(wall(40,400))
walls.append(wall(60,400))
walls.append(wall(180,360))
walls.append(wall(280,420))
walls.append(wall(260,420))
walls.append(wall(260,400))
walls.append(wall(320,400))
walls.append(wall(320,420))
walls.append(wall(320,440))
walls.append(wall(320,460))
walls.append(wall(300,460))
walls.append(wall(280,460))
walls.append(wall(240,460))
walls.append(wall(260,460))
walls.append(wall(220,460))
walls.append(wall(220,440))
walls.append(wall(200,460))
walls.append(wall(160,460))
walls.append(wall(140,460))
walls.append(wall(120,460))
walls.append(wall(100,460))
walls.append(wall(80,460))
walls.append(wall(60,460))
walls.append(wall(40,460))
walls.append(wall(20,460))
walls.append(wall(0,460))
walls.append(wall(200,480))
walls.append(wall(200,500))
walls.append(wall(180,500))
walls.append(wall(160,500))
walls.append(wall(140,500))
walls.append(wall(120,500))
walls.append(wall(100,500))
walls.append(wall(80,500))
walls.append(wall(60,500))
walls.append(wall(40,500))
walls.append(wall(20,540))
walls.append(wall(40,540))
walls.append(wall(60,540))
walls.append(wall(80,540))
walls.append(wall(100,540))
walls.append(wall(100,560))
walls.append(wall(140,520))
walls.append(wall(140,540))
walls.append(wall(180,540))
walls.append(wall(180,560))
walls.append(wall(220,500))
walls.append(wall(220,520))
walls.append(wall(220,540))
walls.append(wall(220,480))
walls.append(wall(260,560))
walls.append(wall(280,560))
walls.append(wall(280,540))
walls.append(wall(240,520))
walls.append(wall(280,520))
walls.append(wall(300,520))
walls.append(wall(300,540))
walls.append(wall(320,540))
walls.append(wall(320,560))
walls.append(wall(340,560))
walls.append(wall(360,560))
walls.append(wall(400,560))
walls.append(wall(400,580))
walls.append(wall(380,560))
walls.append(wall(420,560))
walls.append(wall(440,560))
walls.append(wall(440,540))
walls.append(wall(460,540))
walls.append(wall(460,520))
walls.append(wall(460,560))
walls.append(wall(460,500))
walls.append(wall(460,480))
walls.append(wall(460,460))
walls.append(wall(460,440))
walls.append(wall(460,420))
walls.append(wall(460,400))
walls.append(wall(460,380))
walls.append(wall(460,340))
walls.append(wall(480,380))
walls.append(wall(500,380))
walls.append(wall(480,340))
walls.append(wall(500,340))
walls.append(wall(500,300))
walls.append(wall(500,320))
walls.append(wall(520,300))
walls.append(wall(500,400))
walls.append(wall(520,420))
walls.append(wall(500,420))
walls.append(wall(540,420))
walls.append(wall(560,420))
walls.append(wall(580,420))
walls.append(wall(600,420))
walls.append(wall(620,420))
walls.append(wall(640,420))
walls.append(wall(660,420))
walls.append(wall(660,400))
walls.append(wall(660,380))
walls.append(wall(660,360))
walls.append(wall(660,340))
walls.append(wall(660,320))
walls.append(wall(660,300))
walls.append(wall(640,300))
walls.append(wall(600,300))
walls.append(wall(580,300))
walls.append(wall(560,300))
walls.append(wall(540,300))
walls.append(wall(640,280))
walls.append(wall(640,260))
walls.append(wall(620,260))
walls.append(wall(560,260))
walls.append(wall(560,280))
walls.append(wall(600,260))
walls.append(wall(600,240))
walls.append(wall(620,240))
walls.append(wall(640,240))
walls.append(wall(640,220))
walls.append(wall(640,200))
walls.append(wall(640,180))
walls.append(wall(640,160))
walls.append(wall(640,120))
walls.append(wall(640,100))
walls.append(wall(640,80))
walls.append(wall(640,60))
walls.append(wall(640,40))
walls.append(wall(640,20))
walls.append(wall(660,20))
walls.append(wall(680,20))
walls.append(wall(700,20))
walls.append(wall(720,20))
walls.append(wall(740,20))
walls.append(wall(760,20))
walls.append(wall(780,20))
walls.append(wall(800,20))
walls.append(wall(820,20))
walls.append(wall(840,20))
walls.append(wall(860,20))
walls.append(wall(860,40))
walls.append(wall(860,60))
walls.append(wall(860,80))
walls.append(wall(860,100))
walls.append(wall(860,120))
walls.append(wall(860,140))
walls.append(wall(860,160))
walls.append(wall(860,200))
walls.append(wall(860,180))
walls.append(wall(840,200))
walls.append(wall(820,200))
walls.append(wall(800,200))
walls.append(wall(780,200))
walls.append(wall(740,200))
walls.append(wall(720,200))
walls.append(wall(700,200))
walls.append(wall(680,200))
walls.append(wall(660,200))
walls.append(wall(780,220))
walls.append(wall(780,240))
walls.append(wall(760,240))
walls.append(wall(740,240))
walls.append(wall(720,240))
walls.append(wall(700,240))
walls.append(wall(680,240))
walls.append(wall(680,260))
walls.append(wall(700,260))
walls.append(wall(700,280))
walls.append(wall(680,320))
walls.append(wall(700,320))
walls.append(wall(740,320))
walls.append(wall(720,320))
walls.append(wall(740,300))
walls.append(wall(740,280))
walls.append(wall(760,280))
walls.append(wall(780,280))
walls.append(wall(800,280))
walls.append(wall(820,280))
walls.append(wall(820,260))
walls.append(wall(820,240))
walls.append(wall(840,240))
walls.append(wall(840,260))
walls.append(wall(840,280))
walls.append(wall(860,320))
walls.append(wall(840,320))
walls.append(wall(820,320))
walls.append(wall(800,320))
walls.append(wall(780,320))
walls.append(wall(680,360))
walls.append(wall(680,400))
walls.append(wall(660,440))
walls.append(wall(680,440))
walls.append(wall(700,440))
walls.append(wall(720,440))
walls.append(wall(740,440))
walls.append(wall(780,440))
walls.append(wall(800,440))
walls.append(wall(820,440))
walls.append(wall(840,440))
walls.append(wall(860,440))
walls.append(wall(880,440))
walls.append(wall(860,360))
walls.append(wall(860,400))
walls.append(wall(760,480))
walls.append(wall(740,480))
walls.append(wall(720,480))
walls.append(wall(780,480))
walls.append(wall(800,480))
walls.append(wall(820,480))
walls.append(wall(840,480))
walls.append(wall(840,500))
walls.append(wall(840,520))
walls.append(wall(840,540))
walls.append(wall(840,560))
walls.append(wall(700,480))
walls.append(wall(680,480))
walls.append(wall(660,480))
walls.append(wall(640,480))
walls.append(wall(600,480))
walls.append(wall(600,460))
walls.append(wall(580,460))
walls.append(wall(560,460))
walls.append(wall(540,460))
walls.append(wall(520,460))
walls.append(wall(480,420))
walls.append(wall(480,400))
walls.append(wall(500,460))
walls.append(wall(480,500))
walls.append(wall(500,500))
walls.append(wall(500,540))
walls.append(wall(520,540))
walls.append(wall(540,540))
walls.append(wall(540,520))
walls.append(wall(540,500))
walls.append(wall(580,500))
walls.append(wall(600,500))
walls.append(wall(580,520))
walls.append(wall(580,540))
walls.append(wall(600,540))
walls.append(wall(620,540))
walls.append(wall(640,540))
walls.append(wall(660,540))
walls.append(wall(660,520))
walls.append(wall(680,520))
walls.append(wall(700,520))
walls.append(wall(700,540))
walls.append(wall(720,540))
walls.append(wall(740,540))
walls.append(wall(740,520))
walls.append(wall(760,520))
walls.append(wall(780,520))
walls.append(wall(780,540))

enemies.append(en(380,180))
enemies.append(en(220,100))
enemies.append(en(500,180))
enemies.append(en(580,20))
enemies.append(en(400,360))
enemies.append(en(320,280))
enemies.append(en(40,240))
enemies.append(en(640,400))
enemies.append(en(660,180))
enemies.append(en(660,40))
enemies.append(en(840,180))
enemies.append(en(840,40))
enemies.append(en(680,380))


pygame.init()
pygame.font.init()
myfont = pygame.font.SysFont('Comic Sans MS', 30)
textsurface = myfont.render('You died!', False, (255, 0, 0))
DISPLAYSURF = pygame.display.set_mode((900,700))
pygame.display.set_caption("Game")
direction = 1
rectx = 20
recty = 20
rectxv = 0
rectyv = 0
d = 1
FPS = 100
t = 0
fpsClock = pygame.time.Clock()
px = 860
py = 560
die = None
while True:
  DISPLAYSURF.fill((0,0,0))
  prectx = rectx
  precty = recty
  for en in enemies:
    en.ppx,en.ppy = (en.px,en.py)

  if die == True:
      DISPLAYSURF.blit(textsurface,(350,620))
      rectx,recty = -30,-30
      t -= 1
      if t == 0:
        die = False
  if die == False:
    rectx,recty = 20,20
    die = None
  
  for event in pygame.event.get():
    if event.type == QUIT:
      pygame.quit()
      sys.exit()
    if event.type == KEYDOWN:
      if event.key == K_w:
        rectyv = -2
      if event.key == K_a:
        rectxv = -2
      if event.key == K_s:
        rectyv = 2
      if event.key == K_d:
        rectxv = 2
    if event.type == KEYUP:
      if event.key == K_w:
        rectyv = 0
      if event.key == K_a:
        rectxv = 0
      if event.key == K_s:
        rectyv = 0
      if event.key == K_d:
        rectxv = 0
  for en in enemies:
    if en.d == "r":
      en.px += 2
    if en.d == "d":
      en.py += 2
    if en.d == "l":
      en.px -= 2
    if en.d == "u":
      en.py -= 2
    for wall in walls:
      wallr = pygame.Rect(wall.pos)
      if en.px > wallr.left - 18 and en.px < wallr.right and en.py < wallr.bottom  and en.py > wallr.top - 18:
        en.px,en.py = (en.ppx,en.ppy)
        if en.d == "r":
          en.d = "u"
        elif en.d == "u":
          en.d = "l"
        elif en.d == "l":
          en.d = "d"
        elif en.d == "d":
          en.d = "r"
        
  rectx += rectxv
  recty += rectyv
  for wall in walls:
    save = (prectx,precty)
    wallr = pygame.Rect(wall.pos)
    if rectx > wallr.left - 18 and rectx < wallr.right and recty < wallr.bottom  and recty > wallr.top - 18:
      rectx,recty = save
  zns = []
  for i in enemies:
    zn = Rect(i.px-20,i.py-20,60,60)
    zns.append(zn)
    if rectx >= zn.left and rectx <= zn.right - 20 and recty <= zn.bottom -20 and recty >= zn.top:
      die = True
      t = 400
  pygame.draw.rect(DISPLAYSURF,(0,200,100),(20,20,40,40))
  for zn in zns:
    pygame.draw.rect(DISPLAYSURF,(100,0,0),zn)
  for wall in walls:
    pygame.draw.rect(DISPLAYSURF,wall.col,wall.pos)
  for en in enemies:
    pygame.draw.rect(DISPLAYSURF,(200,100,100),(en.px+1,en.py+1,16,16))

  pygame.draw.rect(DISPLAYSURF,(255,255,255),(rectx+1,recty+1,16,16))
      
  pygame.display.update()
  
  fpsClock.tick(FPS)
  
  fpsClock.tick(FPS)
